Некоторые заметки по поводу SDK


1) О Времени

u32 current_tick = tls_os_get_time();  -  время после старта OS в tick-ах 

переменная const unsigned int HZ - сколько tick в 1 секунде
 она тут константа, задана в конфигах, равно 500

u32 (uint32_t), это число 4 294 967 295 
 делим на 500, получается через 8 589 934 секунд, переменная обнулиться (переполнение) и по новой,
 это 143 165 минут, или 2 386 часов, или 99 дней... 

если переводить в millis (я про Ардуино), то за 1 тик будет 2 миллесекунды, 
и для возвращаемого значения uint32_t это будет означять переполнение примерно через 50 дней...


задержку в миллесекундах, можно сделать так
static void delay(u32 ms)
 {                                                      
 u32 tick = ms / (1000/HZ); // перевод ms в tick

 //ну, и если нужно, чтоб не менее прошло времени, в основном так, 
 // то в данном случае в большую сторону сделаем
 if(ms> (tick * (1000/HZ)) ) tick++; 

 tls_os_time_delay(tick);
 };



